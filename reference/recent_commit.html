<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Retrieve the Most Recent File Change — recent_commit • git2rdata</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Retrieve the Most Recent File Change — recent_commit"><meta name="description" content='Retrieve the most recent commit that added or updated a file or git2rdata
object. This does not imply that file still exists at the current HEAD as it
ignores the deletion of files.
Use this information to document the current version of file or git2rdata
object in an analysis. Since it refers to the most recent change of this
file, it remains unchanged by committing changes to other files. You can
also use it to track if data got updated, requiring an analysis to
be rerun. See vignette("workflow", package = "git2rdata").'><meta property="og:description" content='Retrieve the most recent commit that added or updated a file or git2rdata
object. This does not imply that file still exists at the current HEAD as it
ignores the deletion of files.
Use this information to document the current version of file or git2rdata
object in an analysis. Since it refers to the most recent change of this
file, it remains unchanged by committing changes to other files. You can
also use it to track if data got updated, requiring an analysis to
be rerun. See vignette("workflow", package = "git2rdata").'><meta property="og:image" content="https://ropensci.github.io/git2rdata/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">git2rdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials"><li><a class="dropdown-item" href="../articles/plain_text.html">Getting started storing dataframes as plain text</a></li>
    <li><a class="dropdown-item" href="../articles/version_control.html">Storing dataframes under version control</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">Potential workflow</a></li>
    <li><a class="dropdown-item" href="../articles/efficiency.html">Efficiency</a></li>
    <li><a class="dropdown-item" href="../articles/split_by.html">Large dataframes</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../CONTRIBUTING.html">Contributing</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/git2rdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Retrieve the Most Recent File Change</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/git2rdata/blob/main/R/recent_commit.R" class="external-link"><code>R/recent_commit.R</code></a></small>
      <div class="d-none name"><code>recent_commit.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Retrieve the most recent commit that added or updated a file or git2rdata
object. This does not imply that file still exists at the current HEAD as it
ignores the deletion of files.</p>
<p>Use this information to document the current version of file or git2rdata
object in an analysis. Since it refers to the most recent change of this
file, it remains unchanged by committing changes to other files. You can
also use it to track if data got updated, requiring an analysis to
be rerun. See <code><a href="../articles/workflow.html">vignette("workflow", package = "git2rdata")</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">recent_commit</span><span class="op">(</span><span class="va">file</span>, <span class="va">root</span>, data <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>the name of the git2rdata object. Git2rdata objects cannot
have dots in their name. The name may include a relative path. <code>file</code> is a
path relative to the <code>root</code>.
Note that <code>file</code> must point to a location within <code>root</code>.</p></dd>


<dt id="arg-root">root<a class="anchor" aria-label="anchor" href="#arg-root"></a></dt>
<dd><p>The root of a project. Can be a file path or a <code>git-repository</code>.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>does <code>file</code> refers to a data object (<code>TRUE</code>) or to a file
(<code>FALSE</code>)?
Defaults to <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a <code>data.frame</code> with <code>commit</code>, <code>author</code> and <code>when</code> for the most recent
commit that adds op updates the file.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other version_control:
<code><a href="commit.html">commit</a>()</code>,
<code><a href="pull.html">pull</a>()</code>,
<code><a href="push.html">push</a>()</code>,
<code><a href="repository.html">repository</a>()</code>,
<code><a href="status.html">status</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># initialise a git repo using git2r</span></span></span>
<span class="r-in"><span><span class="va">repo_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"git2rdata-repo"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">repo_path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">repo</span> <span class="op">&lt;-</span> <span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/init.html" class="external-link">init</a></span><span class="op">(</span><span class="va">repo_path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/config.html" class="external-link">config</a></span><span class="op">(</span><span class="va">repo</span>, user.name <span class="op">=</span> <span class="st">"Alice"</span>, user.email <span class="op">=</span> <span class="st">"alice@example.org"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># write and commit a first dataframe</span></span></span>
<span class="r-in"><span><span class="co"># store the output of write_vc() minimize screen output</span></span></span>
<span class="r-in"><span><span class="va">junk</span> <span class="op">&lt;-</span> <span class="fu"><a href="write_vc.html">write_vc</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="op">]</span>, <span class="st">"iris"</span>, <span class="va">repo</span>, sorting <span class="op">=</span> <span class="st">"Sepal.Length"</span>, stage <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  digits <span class="op">=</span> <span class="fl">6</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="commit.html">commit</a></span><span class="op">(</span><span class="va">repo</span>, <span class="st">"important analysis"</span>, session <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [547b9f3] 2025-01-24: important analysis</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">repo_path</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "iris.tsv" "iris.yml"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1.1</span><span class="op">)</span> <span class="co"># required because git doesn't handle subsecond timings</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># write and commit a second dataframe</span></span></span>
<span class="r-in"><span><span class="va">junk</span> <span class="op">&lt;-</span> <span class="fu"><a href="write_vc.html">write_vc</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">iris</span><span class="op">[</span><span class="fl">7</span><span class="op">:</span><span class="fl">12</span>, <span class="op">]</span>, <span class="st">"iris2"</span>, <span class="va">repo</span>, sorting <span class="op">=</span> <span class="st">"Sepal.Length"</span>, stage <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  digits <span class="op">=</span> <span class="fl">6</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="commit.html">commit</a></span><span class="op">(</span><span class="va">repo</span>, <span class="st">"important analysis"</span>, session <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7a9451a] 2025-01-24: important analysis</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">repo_path</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "iris.tsv"  "iris.yml"  "iris2.tsv" "iris2.yml"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1.1</span><span class="op">)</span> <span class="co"># required because git doesn't handle subsecond timings</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># write and commit a new version of the first dataframe</span></span></span>
<span class="r-in"><span><span class="va">junk</span> <span class="op">&lt;-</span> <span class="fu"><a href="write_vc.html">write_vc</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">7</span><span class="op">:</span><span class="fl">12</span>, <span class="op">]</span>, <span class="st">"iris"</span>, <span class="va">repo</span>, stage <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">repo_path</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "iris.tsv"  "iris.yml"  "iris2.tsv" "iris2.yml"</span>
<span class="r-in"><span><span class="fu"><a href="commit.html">commit</a></span><span class="op">(</span><span class="va">repo</span>, <span class="st">"important analysis"</span>, session <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [9caaa6a] 2025-01-24: important analysis</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># find out in which commit a file was last changed</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># "iris.tsv" was last updated in the third commit</span></span></span>
<span class="r-in"><span><span class="fu">recent_commit</span><span class="op">(</span><span class="st">"iris.tsv"</span>, <span class="va">repo</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                     commit author                when</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 9caaa6a8fa8c7e4c0f10fd0911ad5cc3dd4a108f  Alice 2025-01-24 08:50:11</span>
<span class="r-in"><span><span class="co"># "iris.yml" was last updated in the first commit</span></span></span>
<span class="r-in"><span><span class="fu">recent_commit</span><span class="op">(</span><span class="st">"iris.yml"</span>, <span class="va">repo</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                     commit author                when</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 9caaa6a8fa8c7e4c0f10fd0911ad5cc3dd4a108f  Alice 2025-01-24 08:50:11</span>
<span class="r-in"><span><span class="co"># "iris2.yml" was last updated in the second commit</span></span></span>
<span class="r-in"><span><span class="fu">recent_commit</span><span class="op">(</span><span class="st">"iris2.yml"</span>, <span class="va">repo</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                     commit author                when</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 7a9451ad8382476e65f961f1ab23316659698c15  Alice 2025-01-24 08:50:10</span>
<span class="r-in"><span><span class="co"># the git2rdata object "iris" was last updated in the third commit</span></span></span>
<span class="r-in"><span><span class="fu">recent_commit</span><span class="op">(</span><span class="st">"iris"</span>, <span class="va">repo</span>, data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                     commit author                when</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 9caaa6a8fa8c7e4c0f10fd0911ad5cc3dd4a108f  Alice 2025-01-24 08:50:11</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove a dataframe and commit it to see what happens with deleted files</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">repo_path</span>, <span class="st">"iris.tsv"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu"><a href="prune_meta.html">prune_meta</a></span><span class="op">(</span><span class="va">repo</span>, <span class="st">"."</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="commit.html">commit</a></span><span class="op">(</span><span class="va">repo</span>, message <span class="op">=</span> <span class="st">"remove iris"</span>, all <span class="op">=</span> <span class="cn">TRUE</span>, session <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [c0df679] 2025-01-24: remove iris</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">repo_path</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "iris2.tsv" "iris2.yml"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># still points to the third commit as this is the latest commit in which the</span></span></span>
<span class="r-in"><span><span class="co"># data was present</span></span></span>
<span class="r-in"><span><span class="fu">recent_commit</span><span class="op">(</span><span class="st">"iris"</span>, <span class="va">repo</span>, data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                     commit author                when</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 9caaa6a8fa8c7e4c0f10fd0911ad5cc3dd4a108f  Alice 2025-01-24 08:50:11</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.muscardinus.be" class="external-link">Thierry Onkelinx</a>, <a href="https://www.vlaanderen.be/inbo/en-gb" class="external-link"><img src="https://ropensci.github.io/git2rdata/reference/figures/logo-en.png" height="24" alt="logo of the Research Institute for Nature and Forest (INBO)"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

