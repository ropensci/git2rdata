<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Relabel Factor Levels by Updating the Metadata — relabel • git2rdata</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Relabel Factor Levels by Updating the Metadata — relabel"><meta name="description" content='Imagine the situation where we have a dataframe with a factor variable and we
have stored it with write_vc(optimize = TRUE). The raw data file contains
the factor indices and the metadata contains the link between the factor
index and the corresponding label. See
vignette("version_control", package = "git2rdata"). In such a case,
relabelling a factor can be fast and lightweight by updating the metadata.'><meta property="og:description" content='Imagine the situation where we have a dataframe with a factor variable and we
have stored it with write_vc(optimize = TRUE). The raw data file contains
the factor indices and the metadata contains the link between the factor
index and the corresponding label. See
vignette("version_control", package = "git2rdata"). In such a case,
relabelling a factor can be fast and lightweight by updating the metadata.'><meta property="og:image" content="https://ropensci.github.io/git2rdata/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">git2rdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials"><li><a class="dropdown-item" href="../articles/plain_text.html">Getting started storing dataframes as plain text</a></li>
    <li><a class="dropdown-item" href="../articles/version_control.html">Storing dataframes under version control</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">Potential workflow</a></li>
    <li><a class="dropdown-item" href="../articles/efficiency.html">Efficiency</a></li>
    <li><a class="dropdown-item" href="../articles/split_by.html">Large dataframes</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../CONTRIBUTING.html">Contributing</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/git2rdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Relabel Factor Levels by Updating the Metadata</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/git2rdata/blob/main/R/relabel.R" class="external-link"><code>R/relabel.R</code></a></small>
      <div class="d-none name"><code>relabel.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Imagine the situation where we have a dataframe with a factor variable and we
have stored it with <code>write_vc(optimize = TRUE)</code>. The raw data file contains
the factor indices and the metadata contains the link between the factor
index and the corresponding label. See
<code><a href="../articles/version_control.html">vignette("version_control", package = "git2rdata")</a></code>. In such a case,
relabelling a factor can be fast and lightweight by updating the metadata.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">relabel</span><span class="op">(</span><span class="va">file</span>, root <span class="op">=</span> <span class="st">"."</span>, <span class="va">change</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>the name of the git2rdata object. Git2rdata objects cannot
have dots in their name. The name may include a relative path. <code>file</code> is a
path relative to the <code>root</code>.
Note that <code>file</code> must point to a location within <code>root</code>.</p></dd>


<dt id="arg-root">root<a class="anchor" aria-label="anchor" href="#arg-root"></a></dt>
<dd><p>The root of a project. Can be a file path or a <code>git-repository</code>.
Defaults to the current working directory (<code>"."</code>).</p></dd>


<dt id="arg-change">change<a class="anchor" aria-label="anchor" href="#arg-change"></a></dt>
<dd><p>either a <code>list</code> or a <code>data.frame</code>. In case of a <code>list</code> is a
named <code>list</code> with named <code>vectors</code>. The names of list elements must match the
names of the variables. The names of the vector elements must match the
existing factor labels. The values represent the new factor labels. In case
of a <code>data.frame</code> it needs to have the variables <code>factor</code> (name of the
factor), <code>old</code> (the old) factor label and <code>new</code> (the new factor label).
<code>relabel()</code> ignores all other columns.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>invisible <code>NULL</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other storage:
<code><a href="data_package.html">data_package</a>()</code>,
<code><a href="display_metadata.html">display_metadata</a>()</code>,
<code><a href="list_data.html">list_data</a>()</code>,
<code><a href="prune_meta.html">prune_meta</a>()</code>,
<code><a href="read_vc.html">read_vc</a>()</code>,
<code><a href="rename_variable.html">rename_variable</a>()</code>,
<code><a href="rm_data.html">rm_data</a>()</code>,
<code><a href="update_metadata.html">update_metadata</a>()</code>,
<code><a href="verify_vc.html">verify_vc</a>()</code>,
<code><a href="write_vc.html">write_vc</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># initialise a git repo using git2r</span></span></span>
<span class="r-in"><span><span class="va">repo_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"git2rdata-repo-"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">repo_path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">repo</span> <span class="op">&lt;-</span> <span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/init.html" class="external-link">init</a></span><span class="op">(</span><span class="va">repo_path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/config.html" class="external-link">config</a></span><span class="op">(</span><span class="va">repo</span>, user.name <span class="op">=</span> <span class="st">"Alice"</span>, user.email <span class="op">=</span> <span class="st">"alice@example.org"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a dataframe and store it as an optimized git2rdata object.</span></span></span>
<span class="r-in"><span><span class="co"># Note that write_vc() uses optimization by default.</span></span></span>
<span class="r-in"><span><span class="co"># Stage and commit the git2rdata object.</span></span></span>
<span class="r-in"><span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a1"</span>, <span class="st">"a2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"b2"</span>, <span class="st">"b1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  stringsAsFactors <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">junk</span> <span class="op">&lt;-</span> <span class="fu"><a href="write_vc.html">write_vc</a></span><span class="op">(</span><span class="va">ds</span>, <span class="st">"relabel"</span>, <span class="va">repo</span>, sorting <span class="op">=</span> <span class="st">"b"</span>, stage <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cm</span> <span class="op">&lt;-</span> <span class="fu"><a href="commit.html">commit</a></span><span class="op">(</span><span class="va">repo</span>, <span class="st">"initial commit"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># check that the workspace is clean</span></span></span>
<span class="r-in"><span><span class="fu"><a href="status.html">status</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> working directory clean</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define new labels as a list and apply them to the git2rdata object.</span></span></span>
<span class="r-in"><span><span class="va">new_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a2 <span class="op">=</span> <span class="st">"a3"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">relabel</span><span class="op">(</span><span class="st">"relabel"</span>, <span class="va">repo</span>, <span class="va">new_labels</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># check the changes</span></span></span>
<span class="r-in"><span><span class="fu"><a href="read_vc.html">read_vc</a></span><span class="op">(</span><span class="st">"relabel"</span>, <span class="va">repo</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    a  b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 a3 b1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 a1 b2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Use `display_metadata()` to view the metadata.</span>
<span class="r-in"><span><span class="co"># relabel() changed the metadata, not the raw data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="status.html">status</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unstaged changes:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Modified:   relabel.yml</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/add.html" class="external-link">add</a></span><span class="op">(</span><span class="va">repo</span>, <span class="st">"relabel.*"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cm</span> <span class="op">&lt;-</span> <span class="fu"><a href="commit.html">commit</a></span><span class="op">(</span><span class="va">repo</span>, <span class="st">"relabel using a list"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define new labels as a dataframe and apply them to the git2rdata object</span></span></span>
<span class="r-in"><span><span class="va">change</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  factor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  old <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a3"</span>, <span class="st">"a1"</span>, <span class="st">"b2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c2"</span>, <span class="st">"c1"</span>, <span class="st">"b3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  stringsAsFactors <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">relabel</span><span class="op">(</span><span class="st">"relabel"</span>, <span class="va">repo</span>, <span class="va">change</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># check the changes</span></span></span>
<span class="r-in"><span><span class="fu"><a href="read_vc.html">read_vc</a></span><span class="op">(</span><span class="st">"relabel"</span>, <span class="va">repo</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    a  b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 c2 b1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 c1 b3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Use `display_metadata()` to view the metadata.</span>
<span class="r-in"><span><span class="co"># relabel() changed the metadata, not the raw data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="status.html">status</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unstaged changes:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Modified:   relabel.yml</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.muscardinus.be" class="external-link">Thierry Onkelinx</a>, <a href="https://www.vlaanderen.be/inbo/en-gb" class="external-link"><img src="https://ropensci.github.io/git2rdata/reference/figures/logo-en.png" height="24" alt="logo of the Research Institute for Nature and Forest (INBO)"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

