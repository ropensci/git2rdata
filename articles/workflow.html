<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Suggested Workflow for Storing a Variable Set of Dataframes under Version Control • git2rdata</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Suggested Workflow for Storing a Variable Set of Dataframes under Version Control">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">git2rdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><a class="dropdown-item" href="../articles/plain_text.html">Getting started storing dataframes as plain text</a></li>
    <li><a class="dropdown-item" href="../articles/version_control.html">Storing dataframes under version control</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Metadata</a></li>
    <li><a class="dropdown-item" href="../articles/workflow.html">Potential workflow</a></li>
    <li><a class="dropdown-item" href="../articles/efficiency.html">Efficiency</a></li>
    <li><a class="dropdown-item" href="../articles/split_by.html">Large dataframes</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../CONTRIBUTING.html">Contributing</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/git2rdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Suggested Workflow for Storing a Variable Set of Dataframes under Version Control</h1>
                        <h4 data-toc-skip class="author">Thierry
Onkelinx</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/git2rdata/blob/main/vignettes/workflow.Rmd" class="external-link"><code>vignettes/workflow.Rmd</code></a></small>
      <div class="d-none name"><code>workflow.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette describes a suggested workflow for storing a snapshot
of dataframes as git2rdata objects under version control. The workflow
comes in two flavours:</p>
<ol style="list-style-type: decimal">
<li>A single repository holding both the data and the analysis code. The
single repository set-up is simple. A single reference (e.g. commit)
points to both the data and the code.</li>
<li>One repository holding the data and a second repository holding the
code. The data and the code have an independent history under a two
repository set-up. Documenting the analysis requires one reference to
each repository. Such a set-up is useful for repeating the same analysis
(stable code) on updated data.</li>
</ol>
<p>In this vignette we use a <code><a href="https://docs.ropensci.org/git2r/reference/repository.html" class="external-link">git2r::repository()</a></code> object as
the root. This adds git functionality to <code><a href="../reference/write_vc.html">write_vc()</a></code> and
<code><a href="../reference/read_vc.html">read_vc()</a></code>, provided by the <a href="https://cran.r-project.org/package=git2r" class="external-link"><code>git2r</code></a>
package. This allows to pull, stage, commit and push from within R.</p>
<p>Each commit in the data git repository describes a complete snapshot
of the data at the time of the commit. The difference between two
commits can consist of changes in existing git2rdata object (updated
observations, new observations, deleted observations or updated
metadata). Besides updating the existing git2rdata objects, we can also
add new git2rdata objects or remove existing ones. We need to track such
higher level addition and deletions as well.</p>
<p>We illustrate the workflow with a mock analysis on the
<code><a href="https://rdrr.io/r/datasets/beavers.html" class="external-link">datasets::beaver1</a></code> and <code><a href="https://rdrr.io/r/datasets/beavers.html" class="external-link">datasets::beaver2</a></code>
datasets.</p>
</div>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>We start by initializing a git repository. <code>git2rdata</code>
assumes that is already done. We’ll use the <code>git2r</code> functions
to do so. We start by creating a local bare repository. In practice we
will use a remote on an external server (GitHub, Gitlab, Bitbucket, …).
The example below creates a local git repository with an upstream git
repository. Any other workflow to create a similar structure is
fine.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># initialize a bare git repo to be used as remote</span></span>
<span><span class="va">remote</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"git2rdata-workflow-remote"</span><span class="op">)</span></span>
<span><span class="va">remote</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="va">remote</span>, winslash <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in normalizePath(remote, winslash = "/"):</span></span>
<span><span class="co">#&gt; path[1]="/tmp/Rtmp7pIPw6/git2rdata-workflow-remote16f53e7fdd19": No such file</span></span>
<span><span class="co">#&gt; or directory</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">remote</span><span class="op">)</span></span>
<span><span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/init.html" class="external-link">init</a></span><span class="op">(</span><span class="va">remote</span>, bare <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Head:     nothing commited (yet)</span></span>
<span></span>
<span><span class="co"># initialize a local git repo</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"git2rdata-workflow"</span><span class="op">)</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="va">path</span>, winslash <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in normalizePath(path, winslash = "/"):</span></span>
<span><span class="co">#&gt; path[1]="/tmp/Rtmp7pIPw6/git2rdata-workflow16f5285f022a": No such file or</span></span>
<span><span class="co">#&gt; directory</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="va">init_repo</span> <span class="op">&lt;-</span> <span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/clone.html" class="external-link">clone</a></span><span class="op">(</span><span class="va">remote</span>, <span class="va">path</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/config.html" class="external-link">config</a></span><span class="op">(</span><span class="va">init_repo</span>, user.name <span class="op">=</span> <span class="st">"me"</span>, user.email <span class="op">=</span> <span class="st">"me@me.com"</span><span class="op">)</span></span>
<span><span class="co"># add an initial commit with .gitignore file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="st">"*extra*"</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">path</span>, <span class="st">".gitignore"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/add.html" class="external-link">add</a></span><span class="op">(</span><span class="va">init_repo</span>, <span class="st">".gitignore"</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/commit.html" class="external-link">commit</a></span><span class="op">(</span><span class="va">init_repo</span>, message <span class="op">=</span> <span class="st">"Initial commit"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [fb0fa6b] 2025-01-24: Initial commit</span></span>
<span><span class="co"># push initial commit to remote</span></span>
<span><span class="va">branch_name</span> <span class="op">&lt;-</span> <span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/branches.html" class="external-link">branches</a></span><span class="op">(</span><span class="va">init_repo</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/push.html" class="external-link">push</a></span><span class="op">(</span></span>
<span>  <span class="va">init_repo</span>, <span class="st">"origin"</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"refs"</span>, <span class="st">"heads"</span>, <span class="va">branch_name</span>, fsep <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">init_repo</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="structuring-git2rdata-objects-within-a-project">Structuring Git2rdata Objects Within a Project<a class="anchor" aria-label="anchor" href="#structuring-git2rdata-objects-within-a-project"></a>
</h2>
<p><code>git2rdata</code> imposes a minimal structure. Both the
<code>.tsv</code> and the <code>.yml</code> file need to be in the same
folder. That’s it. For the sake of simplicity, in this vignette we dump
all git2rdata objects at the root of the repository.</p>
<p>This might not be good idea for real project. We recommend to use at
least a different directory tree for each import script. This directory
can go into the root of a data repository. It goes in the
<code>data</code> directory in case of a data and code repository. Or
the <code>inst</code> directory in case of an R package.</p>
<p>Your project might need a different directory structure. Feel free to
choose the most relevant data structure for your project.</p>
</div>
<div class="section level2">
<h2 id="storing-dataframes-ad-hoc-into-a-git-repository">Storing Dataframes <em>ad Hoc</em> into a Git Repository<a class="anchor" aria-label="anchor" href="#storing-dataframes-ad-hoc-into-a-git-repository"></a>
</h2>
<div class="section level3">
<h3 id="first-commit">First Commit<a class="anchor" aria-label="anchor" href="#first-commit"></a>
</h3>
<p>In the first commit we use <code><a href="https://rdrr.io/r/datasets/beavers.html" class="external-link">datasets::beaver1</a></code>. We connect
to the git repository using <code><a href="../reference/repository.html">repository()</a></code>. Note that this
assumes that <code>path</code> is an existing git repository. Now we can
write the dataset as a git2rdata object in the repository. If the
<code>root</code> argument of <code><a href="../reference/write_vc.html">write_vc()</a></code> is a
<code>git_repository</code>, it gains two extra arguments:
<code>stage</code> and <code>force</code>. Setting
<code>stage = TRUE</code>, will automatically stage the files written by
<code><a href="../reference/write_vc.html">write_vc()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ropensci.github.io/git2rdata/">git2rdata</a></span><span class="op">)</span></span>
<span><span class="va">repo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/repository.html">repository</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_vc.html">write_vc</a></span><span class="op">(</span><span class="va">beaver1</span>, <span class="st">"beaver"</span>, <span class="va">repo</span>, sorting <span class="op">=</span> <span class="st">"time"</span>, stage <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in meta.data.frame(x, optimize = optimize, na = na, sorting = sorting,</span></span>
<span><span class="co">#&gt; : `digits` was not set. Setting is automatically to 6. See ?meta</span></span></code></pre></div>
<p>We can use <code><a href="../reference/status.html">status()</a></code> to check that
<code><a href="../reference/write_vc.html">write_vc()</a></code> wrote and staged the required files. Then we
<code><a href="../reference/commit.html">commit()</a></code> the changes.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/status.html">status</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span>
<span><span class="co">#&gt; Staged changes:</span></span>
<span><span class="co">#&gt;  New:        beaver.tsv</span></span>
<span><span class="co">#&gt;  New:        beaver.yml</span></span>
<span><span class="va">cm1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commit.html">commit</a></span><span class="op">(</span><span class="va">repo</span>, message <span class="op">=</span> <span class="st">"First commit"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">cm1</span><span class="op">$</span><span class="va">message</span><span class="op">)</span></span>
<span><span class="co">#&gt; First commit</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="second-commit">Second Commit<a class="anchor" aria-label="anchor" href="#second-commit"></a>
</h3>
<p>The second commit adds <code>beaver2</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_vc.html">write_vc</a></span><span class="op">(</span><span class="va">beaver2</span>, <span class="st">"extra_beaver"</span>, <span class="va">repo</span>, sorting <span class="op">=</span> <span class="st">"time"</span>, stage <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in meta.data.frame(x, optimize = optimize, na = na, sorting = sorting,</span></span>
<span><span class="co">#&gt; : `digits` was not set. Setting is automatically to 6. See ?meta</span></span>
<span><span class="fu"><a href="../reference/status.html">status</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span>
<span><span class="co">#&gt; working directory clean</span></span></code></pre></div>
<p>Notice that <code>extra_beaver</code> is not listed in the
<code><a href="../reference/status.html">status()</a></code>, although <code><a href="../reference/write_vc.html">write_vc()</a></code> wrote it to the
repository. The reason is that we set a <code>.gitignore</code> which
contains <code>"*extra*</code>, so git ignores any git2rdata object with
a name containing “extra”. We force git to stage it by setting
<code>force = TRUE</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/status.html">status</a></span><span class="op">(</span><span class="va">repo</span>, ignored <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Ignored files:</span></span>
<span><span class="co">#&gt;  Ignored:    extra_beaver.tsv</span></span>
<span><span class="co">#&gt;  Ignored:    extra_beaver.yml</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_vc.html">write_vc</a></span><span class="op">(</span><span class="va">beaver2</span>, <span class="st">"extra_beaver"</span>, <span class="va">repo</span>, sorting <span class="op">=</span> <span class="st">"time"</span>, stage <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/status.html">status</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span>
<span><span class="co">#&gt; Staged changes:</span></span>
<span><span class="co">#&gt;  New:        extra_beaver.tsv</span></span>
<span><span class="co">#&gt;  New:        extra_beaver.yml</span></span>
<span><span class="va">cm2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commit.html">commit</a></span><span class="op">(</span><span class="va">repo</span>, message <span class="op">=</span> <span class="st">"Second commit"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="third-commit">Third Commit<a class="anchor" aria-label="anchor" href="#third-commit"></a>
</h3>
<p>Now we decide that a single git2rdata object containing the data of
both beavers is more relevant. We add an ID variable for each of the
animals. This requires updating the <code>sorting</code> to avoid ties.
And <code>strict = FALSE</code> to update the metadata. The
“extra_beaver” git2rdata object is no longer needed so we remove it. We
use <code>all = TRUE</code> to stage the removal of “extra_beaver” while
committing the changes.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">beaver1</span><span class="op">$</span><span class="va">beaver</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">beaver2</span><span class="op">$</span><span class="va">beaver</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">beaver</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">beaver1</span>, <span class="va">beaver2</span><span class="op">)</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_vc.html">write_vc</a></span><span class="op">(</span><span class="va">beaver</span>, <span class="st">"beaver"</span>, <span class="va">repo</span>, sorting <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"beaver"</span>, <span class="st">"time"</span><span class="op">)</span>,</span>
<span>               strict <span class="op">=</span> <span class="cn">FALSE</span>, stage <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Changes in the metadata may lead to unnecessarily large diffs.</span></span>
<span><span class="co">#&gt; See vignette('version_control', package = 'git2rdata') for more information.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - The sorting variables changed.</span></span>
<span><span class="co">#&gt;     - Sorting for the new data: 'beaver', 'time'.</span></span>
<span><span class="co">#&gt;     - Sorting for the old data: 'time'.</span></span>
<span><span class="co">#&gt; - New data has a different number of variables.</span></span>
<span><span class="co">#&gt; - New variables: beaver.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">path</span>, <span class="st">"extra"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE TRUE</span></span>
<span><span class="fu"><a href="../reference/status.html">status</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span>
<span><span class="co">#&gt; Unstaged changes:</span></span>
<span><span class="co">#&gt;  Deleted:    extra_beaver.tsv</span></span>
<span><span class="co">#&gt;  Deleted:    extra_beaver.yml</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Staged changes:</span></span>
<span><span class="co">#&gt;  Modified:   beaver.tsv</span></span>
<span><span class="co">#&gt;  Modified:   beaver.yml</span></span>
<span><span class="va">cm3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commit.html">commit</a></span><span class="op">(</span><span class="va">repo</span>, message <span class="op">=</span> <span class="st">"Third commit"</span>, all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/status.html">status</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span>
<span><span class="co">#&gt; working directory clean</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="scripted-workflow-for-storing-dataframes">Scripted Workflow for Storing Dataframes<a class="anchor" aria-label="anchor" href="#scripted-workflow-for-storing-dataframes"></a>
</h2>
<p>We strongly recommend to add git2rdata object through an import
script instead of adding them <a href="#storing-dataframes-ad-hoc-into-a-git-repository"><em>ad
hoc</em></a>. Store this script in the (analysis) repository. It
documents the creation of the git2rdata objects. Rerun this script
whenever updated data becomes available.</p>
<p>Old versions of the import script and the associated git2rdata remain
available through the version control history. Remove obsolete git2rdata
objects from the import script. This keeps both the import script and
the working directory tidy and minimal.</p>
<p>Basically, the import script should create all git2rdata objects
within a given directory tree. This gives the advantage that we start
the import script by clearing any existing git2rdata object in this
directory. If the import script no longer creates a git2rdata object, it
gets removed without the need to track what git2rdata objects existed in
the previous version.</p>
<p>The brute force method of removing all files or all <code>.tsv</code>
/ <code>.yml</code> pairs is not a good idea. This removes the existing
metadata which we need for efficient storage (see
<code><a href="../articles/efficiency.html">vignette("efficiency", package = "git2rdata")</a></code>). A better
solution is to use <code><a href="../reference/rm_data.html">rm_data()</a></code> on the directory at the start
of the import script. This removes all <code>.tsv</code> files which
have valid metadata. The existing metadata remains untouched at this
point.</p>
<p>Then write all git2rdata objects and stage them. Unchanged objects
will not lead to a diff, even if we first deleted and then recreated
them. The script won’t recreate the <code>.tsv</code> file of obsolete
git2rdata objects. Use <code><a href="../reference/prune_meta.html">prune_meta()</a></code> to remove any leftover
metadata files.</p>
<p>Commit and push the changes at the end of the script.</p>
<p>Below is an example script recreating the “beaver” git2rdata object
from the <a href="#third-commit">third commit</a>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ropensci.github.io/git2rdata/">git2rdata</a></span><span class="op">)</span></span>
<span><span class="co"># step 1: setup the repository and data path</span></span>
<span><span class="va">repo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/repository.html">repository</a></span><span class="op">(</span><span class="st">"."</span><span class="op">)</span></span>
<span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"beaver"</span><span class="op">)</span></span>
<span><span class="co"># step 1b: sync the repository with the remote</span></span>
<span><span class="fu"><a href="../reference/pull.html">pull</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="va">repo</span><span class="op">)</span></span>
<span><span class="co"># step 2: remove all existing data files</span></span>
<span><span class="fu"><a href="../reference/rm_data.html">rm_data</a></span><span class="op">(</span>root <span class="op">=</span> <span class="va">repo</span>, path <span class="op">=</span> <span class="va">data_path</span>, stage <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># step 3: write all relevant git2rdata objects to the data path</span></span>
<span><span class="va">beaver1</span><span class="op">$</span><span class="va">beaver</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">beaver2</span><span class="op">$</span><span class="va">beaver</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">body_temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">beaver1</span>, <span class="va">beaver2</span><span class="op">)</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/write_vc.html">write_vc</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">body_temp</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_path</span>, <span class="st">"body_temperature"</span><span class="op">)</span>,</span>
<span>               root <span class="op">=</span> <span class="va">repo</span>, sorting <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"beaver"</span>, <span class="st">"time"</span><span class="op">)</span>, stage <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># step 4: remove any dangling metadata files</span></span>
<span><span class="fu"><a href="../reference/prune_meta.html">prune_meta</a></span><span class="op">(</span>root <span class="op">=</span> <span class="va">repo</span>, path <span class="op">=</span> <span class="va">data_path</span>, stage <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># step 5: commit the changes</span></span>
<span><span class="va">cm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/commit.html">commit</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="va">repo</span>, message <span class="op">=</span> <span class="st">"import"</span><span class="op">)</span></span>
<span><span class="co"># step 5b: sync the repository with the remote</span></span>
<span><span class="fu"><a href="../reference/push.html">push</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="va">repo</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="r-package-workflow-for-storing-dataframes">R Package Workflow for Storing Dataframes<a class="anchor" aria-label="anchor" href="#r-package-workflow-for-storing-dataframes"></a>
</h2>
<p>We recommend a two repository set-up in case of recurring analyses.
These are relative stable analyses which have to run with some frequency
on updated data (e.g. once a month). That makes it worthwhile to convert
the analyses into an R package. Split long scripts into a set of shorter
functions which are much easier to document and maintain. An R package
offers lots of <a href="http://r-pkgs.had.co.nz/check.html" class="external-link">functionality</a> out of the
box to check the quality of your code.</p>
<p>The example below converts the import script above into a function.
We illustrate how you can use Roxygen2 (see
<code><a href="https://roxygen2.r-lib.org/articles/roxygen2.html" class="external-link">vignette("roxygen2", package = "roxygen2")</a></code>) tags to
document the function and to list its dependencies. Note that we added
<code>session = TRUE</code> to <code><a href="../reference/commit.html">commit()</a></code>. This will append
the <code><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo()</a></code> at the time of the commit to the commit
message. Thus documenting all loaded R packages and their version. This
documents to code used to create the git2rdata object since your
analysis code resides in a dedicated package with its own version
number. We strongly recommend to run the import from a fresh R session.
Then the <code><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo()</a></code> at commit time contains those
packages with are strictly required for the import. Consider running the
import from the command line.
e.g. <code>Rscript -e 'mypackage::import_body_temp("path/to/root")'</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Import the beaver body temperature data</span></span>
<span><span class="co">#' @param path the root of the git repository</span></span>
<span><span class="co">#' @importFrom git2rdata repository pull rm_data write_vc prune_meta commit push</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">import_body_temp</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">path</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># step 1: setup the repository and data path</span></span>
<span>  <span class="va">repo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/repository.html">repository</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span>  <span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"beaver"</span><span class="op">)</span></span>
<span>  <span class="co"># step 1b: sync the repository with the remote</span></span>
<span>  <span class="fu"><a href="../reference/pull.html">pull</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="va">repo</span><span class="op">)</span></span>
<span>  <span class="co"># step 2: remove all existing data files</span></span>
<span>  <span class="fu"><a href="../reference/rm_data.html">rm_data</a></span><span class="op">(</span>root <span class="op">=</span> <span class="va">repo</span>, path <span class="op">=</span> <span class="va">data_path</span>, stage <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># step 3: write all relevant git2rdata objects to the data path</span></span>
<span>  <span class="va">beaver1</span><span class="op">$</span><span class="va">beaver</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="va">beaver2</span><span class="op">$</span><span class="va">beaver</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span>  <span class="va">body_temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">beaver1</span>, <span class="va">beaver2</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="../reference/write_vc.html">write_vc</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">body_temp</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_path</span>, <span class="st">"body_temperature"</span><span class="op">)</span>,</span>
<span>                 root <span class="op">=</span> <span class="va">repo</span>, sorting <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"beaver"</span>, <span class="st">"time"</span><span class="op">)</span>, stage <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># step 4: remove any dangling metadata files</span></span>
<span>  <span class="fu"><a href="../reference/prune_meta.html">prune_meta</a></span><span class="op">(</span>root <span class="op">=</span> <span class="va">repo</span>, path <span class="op">=</span> <span class="va">data_path</span>, stage <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># step 5: commit the changes</span></span>
<span>  <span class="fu"><a href="../reference/commit.html">commit</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="va">repo</span>, message <span class="op">=</span> <span class="st">"import"</span>, session <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="co"># step 5b: sync the repository with the remote</span></span>
<span>  <span class="fu"><a href="../reference/push.html">push</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">repo</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="analysis-workflow-with-reproducible-data">Analysis Workflow with Reproducible Data<a class="anchor" aria-label="anchor" href="#analysis-workflow-with-reproducible-data"></a>
</h2>
<p>The example below is a small trivial example of a standardized
analysis in which documents the source of the data by describing the
name of the data, the repository URL and the commit. We can use this
information when reporting the results. This makes the data underlying
the results traceable.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">ds_name</span>, <span class="va">repo</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_vc.html">read_vc</a></span><span class="op">(</span><span class="va">ds_name</span>, <span class="va">repo</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    dataset <span class="op">=</span> <span class="va">ds_name</span>,</span>
<span>    repository <span class="op">=</span> <span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/remote_url.html" class="external-link">remote_url</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span>,</span>
<span>    commit <span class="op">=</span> <span class="fu"><a href="../reference/recent_commit.html">recent_commit</a></span><span class="op">(</span><span class="va">ds_name</span>, <span class="va">repo</span>, data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">temp</span> <span class="op">~</span> <span class="va">activ</span>, data <span class="op">=</span> <span class="va">ds</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">report</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">model</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"**dataset:** %s  \n**commit:** %s  \n**repository:** %s"</span>,</span>
<span>                      <span class="va">x</span><span class="op">$</span><span class="va">dataset</span>, <span class="va">x</span><span class="op">$</span><span class="va">commit</span><span class="op">$</span><span class="va">commit</span>, <span class="va">x</span><span class="op">$</span><span class="va">repository</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>In this case we can run every analysis by looping over the list of
datasets in the repository.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">repo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/repository.html">repository</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="va">current</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="../reference/list_data.html">list_data</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span>, <span class="va">analysis</span>, repo <span class="op">=</span> <span class="va">repo</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">current</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_data.html">list_data</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">current</span>, <span class="va">report</span><span class="op">)</span></span>
<span><span class="va">junk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">print</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>
<strong>dataset:</strong> beaver.tsv<br><strong>commit:</strong> 510a3f71f63cbbf0893704a8fe391876691272a0<br><strong>repository:</strong>
/tmp/Rtmp7pIPw6/git2rdata-workflow-remote16f53e7fdd19</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">t value</th>
<th align="right">Pr(&gt;|t|)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">36.9084247</td>
<td align="right">0.0198546</td>
<td align="right">1858.93938</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">activ</td>
<td align="right">0.9346636</td>
<td align="right">0.0352219</td>
<td align="right">26.53644</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>The example below does the same thing for the first and second
commit.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># checkout first commit</span></span>
<span><span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/checkout.html" class="external-link">checkout</a></span><span class="op">(</span><span class="va">cm1</span><span class="op">)</span></span>
<span><span class="co"># do analysis</span></span>
<span><span class="va">previous</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="../reference/list_data.html">list_data</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span>, <span class="va">analysis</span>, repo <span class="op">=</span> <span class="va">repo</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">previous</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_data.html">list_data</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">previous</span>, <span class="va">report</span><span class="op">)</span></span>
<span><span class="va">junk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">print</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>
<strong>dataset:</strong> beaver.tsv<br><strong>commit:</strong> b340ee4b109a8ff40f6a0ac8e66d4c82032b56ba<br><strong>repository:</strong>
/tmp/Rtmp7pIPw6/git2rdata-workflow-remote16f53e7fdd19</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">t value</th>
<th align="right">Pr(&gt;|t|)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">36.8421296</td>
<td align="right">0.0167694</td>
<td align="right">2196.987569</td>
<td align="right">0e+00</td>
</tr>
<tr class="even">
<td align="left">activ</td>
<td align="right">0.3812037</td>
<td align="right">0.0730961</td>
<td align="right">5.215107</td>
<td align="right">8e-07</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># checkout second commit</span></span>
<span><span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/checkout.html" class="external-link">checkout</a></span><span class="op">(</span><span class="va">cm2</span><span class="op">)</span></span>
<span><span class="co"># do analysis</span></span>
<span><span class="va">previous</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="../reference/list_data.html">list_data</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span>, <span class="va">analysis</span>, repo <span class="op">=</span> <span class="va">repo</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">previous</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_data.html">list_data</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">previous</span>, <span class="va">report</span><span class="op">)</span></span>
<span><span class="va">junk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">print</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>
<strong>dataset:</strong> beaver.tsv<br><strong>commit:</strong> b340ee4b109a8ff40f6a0ac8e66d4c82032b56ba<br><strong>repository:</strong>
/tmp/Rtmp7pIPw6/git2rdata-workflow-remote16f53e7fdd19</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">t value</th>
<th align="right">Pr(&gt;|t|)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">36.8421296</td>
<td align="right">0.0167694</td>
<td align="right">2196.987569</td>
<td align="right">0e+00</td>
</tr>
<tr class="even">
<td align="left">activ</td>
<td align="right">0.3812037</td>
<td align="right">0.0730961</td>
<td align="right">5.215107</td>
<td align="right">8e-07</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>
<strong>dataset:</strong> extra_beaver.tsv<br><strong>commit:</strong> a36f0840ce1f0be4fc5afdfde1325004c6fe603e<br><strong>repository:</strong>
/tmp/Rtmp7pIPw6/git2rdata-workflow-remote16f53e7fdd19</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">t value</th>
<th align="right">Pr(&gt;|t|)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">37.0968421</td>
<td align="right">0.0345624</td>
<td align="right">1073.32955</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">activ</td>
<td align="right">0.8062224</td>
<td align="right">0.0438943</td>
<td align="right">18.36736</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>If you inspect the reported results you’ll notice that all the output
(coefficients and commit hash) for “beaver” object is identical for the
first and second commit. This makes sense since the “beaver” object
didn’t change during the second commit. The output for the current
(third) commit is different because the dataset changed.</p>
<div class="section level3">
<h3 id="long-running-analysis">Long running analysis<a class="anchor" aria-label="anchor" href="#long-running-analysis"></a>
</h3>
<p>Imagine the case where an individual analysis takes a while to run.
We store the most recent version of each analysis and add the
information from <code><a href="../reference/recent_commit.html">recent_commit()</a></code>. When preparing the
analysis, you can run <code><a href="../reference/recent_commit.html">recent_commit()</a></code> again on the dataset
and compare the commit hash with that one of the available analysis. If
the commit hashes match, then the data hasn’t changed. Then there is no
need to rerun the analysis<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;assuming the code for running the analysis didn’t
change.&lt;/p&gt;"><sup>1</sup></a>, saving valuable computing resources and
time.</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.muscardinus.be" class="external-link">Thierry Onkelinx</a>, <a href="https://www.vlaanderen.be/inbo/en-gb" class="external-link"><img src="https://ropensci.github.io/git2rdata/reference/figures/logo-en.png" height="24" alt="logo of the Research Institute for Nature and Forest (INBO)"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
